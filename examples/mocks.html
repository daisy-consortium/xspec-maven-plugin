<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-06-01 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20140601" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Maven - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.1.min.js"></script>

              
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/daisy-consortium/xspec-maven-plugin">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2><b>XSpec</b> Maven Plugin</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-06-01
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0.0
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="../index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../plugin-info.html" title="Goals">
          <i class="none"></i>
        Goals</a>
            </li>
                
      <li>
  
                          <a href="../usage.html" title="Usage">
          <i class="none"></i>
        Usage</a>
            </li>
                
      <li>
  
                          <a href="../faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                              <li class="nav-header">Examples</li>
                              
      <li>
  
                          <a href="../examples/basic.html" title="Running XSpec Tests">
          <i class="none"></i>
        Running XSpec Tests</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Mocking external dependencies</a>
          </li>
                              <li class="nav-header">Maven documentation</li>
                                                                                                                                                                                                                                                  
      <li>
  
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                        
      <li>
  
                          <a href="../project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                         <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="../img/maven-mavenfactured.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Mocking external dependencies<a name="Mocking_external_dependencies"></a></h2>
<p>It is not unusual for XSLT stylesheet to import functions or templates from an external resource. For example, the following stylesheet tries to import an XSLT stylesheet declaring a <tt>f:hello</tt> utility function:</p>

<div class="source">
<pre>&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
  xmlns:f=&quot;http://www.example.org/functions&quot; version=&quot;2.0&quot;&gt;
    
    &lt;xsl:import href=&quot;http://www.example.org/functions.xsl&quot;/&gt;
    
    &lt;xsl:template match=&quot;hello&quot;&gt;
        &lt;hello&gt;&lt;xsl:value-of select=&quot;f:hello('World')&quot;/&gt;&lt;/hello&gt;
    &lt;/xsl:template&gt;
    
&lt;/xsl:stylesheet&gt;
</pre></div>
<p>Testing this XSLT would work if an internet connection is available when running the tests, if the imported XSLT resource is effectively available at the declared URL, and if it does not in turn depend on inaccessible remote resources.</p>
<p>For pure unit tests, it is often preferrable to not depend on such external dependencies. The XSpec Maven plugin allows to declare mock implementations of remote resources using a local XML Catalog. For instance, to test the XSLT defined above, a file named <tt>catalog.xml</tt> can be placed in the same directory as the XSpec test description with the following content:</p>

<div class="source">
<pre>&lt;catalog xmlns=&quot;urn:oasis:names:tc:entity:xmlns:xml:catalog&quot;&gt;
    &lt;uri name=&quot;http://www.example.org/functions.xsl&quot; uri=&quot;mock-functions.xsl&quot;/&gt;
&lt;/catalog&gt;
</pre></div>
<p>When running the XSpec tests, the plugin will then use the <tt>mock-functions.xsl</tt> implementation of the dependency <tt>http://www.example.org/functions.xsl</tt>:</p>

<div class="source">
<pre>&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
    xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:f=&quot;http://www.example.org/functions&quot;
    version=&quot;2.0&quot;&gt;

    &lt;xsl:function name=&quot;f:hello&quot; as=&quot;xs:string&quot;&gt;
        &lt;xsl:param name=&quot;hello&quot; as=&quot;xs:string&quot;/&gt;
        &lt;xsl:sequence select=&quot;concat('Hello, ',$hello,'!')&quot;/&gt;
    &lt;/xsl:function&gt;
    
&lt;/xsl:stylesheet&gt;
</pre></div>
<p>In the end, the layout of the Maven project described in the example would be:</p>

<div class="source">
<pre>pom.xml
+ src
  + main
    + xslt
      - say-hello.xsl
  + test
    + xspec
      - catalog.xml
      - mock-functions.xsl
      - say-hello.xspec
</pre></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2013&#x2013;2014
                        <a href="http://www.daisy.org/">The DAISY Consortium</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
